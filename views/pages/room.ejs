<!DOCTYPE html>
<html>

  <head>
    <%- include ../partials/meta -%>
    <%- include ../partials/icons -%>
    <title>Room</title>
    <!-- Add socket.io client library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.1/socket.io.js"></script>
    <!-- Add mediaElement library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/4.1.1/mediaelement-and-player.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/4.1.1/mediaelementplayer.min.css">
    <link type="text/css" rel="stylesheet" href="/css/pages/room.css">
  </head>

  <body>
    <nav>
      <ul class="connected">
        <li>Room 137</li>
        <%
          var html = '';
          <!-- Key is same as socket.id loop over all id's, get userProfile for every id. -->
          Object.keys(connectedUsers).forEach(function(id) {
            var userProfile = connectedUsers[id];
            html += `
              <!-- Default user (admin) -->
              <li data-id="${id}" class="user">
                <img src="${userProfile.profileImage}">
                <p>${userProfile.profileName}</p>
              </li>`;
          }) %>
          <%- html %>
      </ul>
    </nav>
    <form id="search">
      <input id="keyword" type="text" placeholder="Find a Youtube video..." name="video">
      <button>Search</button>
    </form>
    <section>
      <video id="player1" preload="none">
          <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI" />
      </video>
      <textarea autofocus id="text" oninput="sendValue()"></textarea>
    </section>
    <%- include ../partials/offline -%>
    <script src="/js/room.js"></script>
    <script>
      var player = new MediaElementPlayer('#player1');
    </script>
  </body>

</html>
